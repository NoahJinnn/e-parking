{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport smoothscroll from 'smoothscroll-polyfill';\n/**\n * Carousel\n * @author: Giang Nguyen\n */\n\nvar Carousel = function Carousel(props) {\n  _s();\n\n  // Constructor\n  var infinite = props.infinite,\n      index = props.index,\n      id = props.id,\n      children = props.children;\n\n  var _useState = useState({\n    slideIndex: index\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var slideIndex = state.slideIndex; // useEffect as componentDidMount and componentWillUnmount\n\n  useEffect(function () {\n    smoothscroll.polyfill();\n    setTimeout(function () {\n      processSlide();\n    }, 10);\n    return function () {\n      processSlide('remove');\n    };\n  }, []);\n\n  var processSlide = function processSlide() {\n    var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var carousel = document.getElementById(\"carousel_\".concat(id));\n\n    if (action == 'remove') {\n      carousel === null || carousel === void 0 ? void 0 : carousel.removeEventListener('scroll', function () {});\n    } else {\n      var _document$getElementB;\n\n      var children_length = React.Children.toArray(children).length; // Define previous or next slide\n\n      var prevIndex = slideIndex - 1;\n\n      if (slideIndex == 0) {\n        if (infinite) {\n          prevIndex = children_length - 1;\n        } else {\n          prevIndex = 0;\n        }\n      }\n\n      var nextIndex = slideIndex + 1;\n\n      if (slideIndex == children_length - 1) {\n        if (infinite) {\n          nextIndex = 0;\n        } else {\n          nextIndex = children_length - 1;\n        }\n      }\n\n      var slide_id = action == 'prev' ? \"\".concat(id).concat(prevIndex) : action == 'next' ? \"\".concat(id).concat(nextIndex) : \"\".concat(id).concat(slideIndex);\n      var offsetLeft = (_document$getElementB = document.getElementById(slide_id)) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.offsetLeft; // Scroll to slide\n\n      carousel === null || carousel === void 0 ? void 0 : carousel.scrollTo({\n        left: offsetLeft ? offsetLeft : 0,\n        behavior: action ? 'smooth' : 'auto'\n      }); // Handle slide index\n\n      carousel === null || carousel === void 0 ? void 0 : carousel.addEventListener('scroll', function () {\n        var elements = document.querySelectorAll(\"div.components__carousel-item.\".concat(id));\n\n        var _loop = function _loop(i) {\n          var element = elements[i];\n          var next_element = document.getElementById(\"\".concat(id).concat(parseInt(i) + 1));\n\n          if (element instanceof HTMLElement) {\n            if (!next_element && carousel.scrollLeft >= element.offsetLeft - 100) {\n              setState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  slideIndex: children_length - 1\n                });\n              });\n            }\n\n            if (next_element && carousel.scrollLeft >= element.offsetLeft && carousel.scrollLeft <= next_element.offsetLeft) {\n              setState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  slideIndex: parseInt(i)\n                });\n              });\n            }\n          }\n        };\n\n        for (var i in elements) {\n          _loop(i);\n        }\n      });\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"components__carousel\"\n  }, __jsx(\"div\", {\n    className: \"components__carousel-index pv2 ph3\"\n  }, slideIndex + 1, \" / \", React.Children.toArray(children).length), __jsx(\"div\", {\n    className: \"components__carousel-wrapper\",\n    id: \"carousel_\".concat(id)\n  }, __jsx(\"div\", {\n    className: \"flex\"\n  }, React.Children.map(children, function (child, i) {\n    return __jsx(\"div\", {\n      className: \"components__carousel-item \".concat(id),\n      key: i,\n      id: \"\".concat(id).concat(i)\n    }, child);\n  }))), __jsx(\"div\", {\n    className: \"components__carousel-prev flex justify-center items-center\",\n    onClick: function onClick() {\n      return processSlide('prev');\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-chevron-left\"\n  })), __jsx(\"div\", {\n    className: \"components__carousel-next flex justify-center items-center\",\n    onClick: function onClick() {\n      return processSlide('next');\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-chevron-right\"\n  })));\n};\n\n_s(Carousel, \"p3W19EEOLU7MEZtKAMVDSwJhxjQ=\");\n\n_c = Carousel;\nCarousel.defaultProps = {\n  index: 0,\n  infinite: true\n};\nexport default Carousel;\n\nvar _c;\n\n$RefreshReg$(_c, \"Carousel\");","map":{"version":3,"sources":["/home/nguyen/workspace/projects/eparking/WebProfile/components/client/Carousel.tsx"],"names":["React","useState","useEffect","smoothscroll","Carousel","props","infinite","index","id","children","slideIndex","state","setState","polyfill","setTimeout","processSlide","action","carousel","document","getElementById","removeEventListener","children_length","Children","toArray","length","prevIndex","nextIndex","slide_id","offsetLeft","scrollTo","left","behavior","addEventListener","elements","querySelectorAll","i","element","next_element","parseInt","HTMLElement","scrollLeft","prevState","map","child","defaultProps"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AAEA;AACA;AACA;AACA;;AAWA,IAAMC,QAAmC,GAAG,SAAtCA,QAAsC,CAACC,KAAD,EAAW;AAAA;;AACnD;AACA,MAAQC,QAAR,GAA0CD,KAA1C,CAAQC,QAAR;AAAA,MAAkBC,KAAlB,GAA0CF,KAA1C,CAAkBE,KAAlB;AAAA,MAAyBC,EAAzB,GAA0CH,KAA1C,CAAyBG,EAAzB;AAAA,MAA6BC,QAA7B,GAA0CJ,KAA1C,CAA6BI,QAA7B;;AACA,kBAA0BR,QAAQ,CAAC;AAC/BS,IAAAA,UAAU,EAAEH;AADmB,GAAD,CAAlC;AAAA,MAAOI,KAAP;AAAA,MAAcC,QAAd;;AAGA,MAAQF,UAAR,GAAuBC,KAAvB,CAAQD,UAAR,CANmD,CAQnD;;AACAR,EAAAA,SAAS,CAAC,YAAM;AACZC,IAAAA,YAAY,CAACU,QAAb;AAEAC,IAAAA,UAAU,CAAC,YAAM;AACbC,MAAAA,YAAY;AACf,KAFS,EAEP,EAFO,CAAV;AAGA,WAAO,YAAM;AACTA,MAAAA,YAAY,CAAC,QAAD,CAAZ;AACH,KAFD;AAGH,GATQ,EASN,EATM,CAAT;;AAWA,MAAMA,YAAY,GAAG,SAAfA,YAAe,GAAyB;AAAA,QAAxBC,MAAwB,uEAAP,EAAO;AAC1C,QAAMC,QAAQ,GAAGC,QAAQ,CAACC,cAAT,oBAAoCX,EAApC,EAAjB;;AACA,QAAIQ,MAAM,IAAI,QAAd,EAAwB;AACpBC,MAAAA,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEG,mBAAV,CAA8B,QAA9B,EAAwC,YAAM,CAAE,CAAhD;AACH,KAFD,MAEO;AAAA;;AACH,UAAMC,eAAe,GAAGrB,KAAK,CAACsB,QAAN,CAAeC,OAAf,CAAuBd,QAAvB,EAAiCe,MAAzD,CADG,CAGH;;AACA,UAAIC,SAAS,GAAGf,UAAU,GAAG,CAA7B;;AACA,UAAIA,UAAU,IAAI,CAAlB,EAAqB;AACjB,YAAIJ,QAAJ,EAAc;AACVmB,UAAAA,SAAS,GAAGJ,eAAe,GAAG,CAA9B;AACH,SAFD,MAEO;AACHI,UAAAA,SAAS,GAAG,CAAZ;AACH;AACJ;;AACD,UAAIC,SAAS,GAAGhB,UAAU,GAAG,CAA7B;;AACA,UAAIA,UAAU,IAAIW,eAAe,GAAG,CAApC,EAAuC;AACnC,YAAIf,QAAJ,EAAc;AACVoB,UAAAA,SAAS,GAAG,CAAZ;AACH,SAFD,MAEO;AACHA,UAAAA,SAAS,GAAGL,eAAe,GAAG,CAA9B;AACH;AACJ;;AACD,UAAMM,QAAQ,GAAGX,MAAM,IAAI,MAAV,aAAsBR,EAAtB,SAA2BiB,SAA3B,IAAyCT,MAAM,IAAI,MAAV,aAAsBR,EAAtB,SAA2BkB,SAA3B,cAA4ClB,EAA5C,SAAiDE,UAAjD,CAA1D;AACA,UAAIkB,UAAU,4BAAGV,QAAQ,CAACC,cAAT,CAAwBQ,QAAxB,CAAH,0DAAG,sBAAmCC,UAApD,CArBG,CAuBH;;AACAX,MAAAA,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEY,QAAV,CAAmB;AAAEC,QAAAA,IAAI,EAAEF,UAAU,GAAGA,UAAH,GAAgB,CAAlC;AAAqCG,QAAAA,QAAQ,EAAEf,MAAM,GAAG,QAAH,GAAc;AAAnE,OAAnB,EAxBG,CA0BH;;AACAC,MAAAA,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEe,gBAAV,CAA2B,QAA3B,EAAqC,YAAM;AACvC,YAAIC,QAAQ,GAAGf,QAAQ,CAACgB,gBAAT,yCAA2D1B,EAA3D,EAAf;;AADuC,mCAE5B2B,CAF4B;AAGnC,cAAIC,OAAO,GAAGH,QAAQ,CAACE,CAAD,CAAtB;AACA,cAAME,YAAY,GAAGnB,QAAQ,CAACC,cAAT,WAA2BX,EAA3B,SAAgC8B,QAAQ,CAACH,CAAD,CAAR,GAAc,CAA9C,EAArB;;AACA,cAAIC,OAAO,YAAYG,WAAvB,EAAoC;AAChC,gBAAI,CAACF,YAAD,IAAiBpB,QAAQ,CAACuB,UAAT,IAAuBJ,OAAO,CAACR,UAAR,GAAqB,GAAjE,EAAsE;AAClEhB,cAAAA,QAAQ,CAAC,UAAC6B,SAAD;AAAA,uDACFA,SADE;AAEL/B,kBAAAA,UAAU,EAAEW,eAAe,GAAG;AAFzB;AAAA,eAAD,CAAR;AAIH;;AACD,gBAAIgB,YAAY,IAAIpB,QAAQ,CAACuB,UAAT,IAAuBJ,OAAO,CAACR,UAA/C,IAA6DX,QAAQ,CAACuB,UAAT,IAAuBH,YAAY,CAACT,UAArG,EAAiH;AAC7GhB,cAAAA,QAAQ,CAAC,UAAC6B,SAAD;AAAA,uDACFA,SADE;AAEL/B,kBAAAA,UAAU,EAAE4B,QAAQ,CAACH,CAAD;AAFf;AAAA,eAAD,CAAR;AAIH;AACJ;AAlBkC;;AAEvC,aAAK,IAAMA,CAAX,IAAgBF,QAAhB,EAA0B;AAAA,gBAAfE,CAAe;AAiBzB;AACJ,OApBD;AAqBH;AACJ,GArDD;;AAuDA,SACI;AAAK,IAAA,SAAS,EAAC;AAAf,KACI;AAAK,IAAA,SAAS,EAAC;AAAf,KACKzB,UAAU,GAAG,CADlB,SACwBV,KAAK,CAACsB,QAAN,CAAeC,OAAf,CAAuBd,QAAvB,EAAiCe,MADzD,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,8BAAf;AAA8C,IAAA,EAAE,qBAAchB,EAAd;AAAhD,KACI;AAAK,IAAA,SAAS,EAAC;AAAf,KACKR,KAAK,CAACsB,QAAN,CAAeoB,GAAf,CAAmBjC,QAAnB,EAA6B,UAACkC,KAAD,EAAQR,CAAR;AAAA,WAC1B;AAAK,MAAA,SAAS,sCAA+B3B,EAA/B,CAAd;AAAmD,MAAA,GAAG,EAAE2B,CAAxD;AAA2D,MAAA,EAAE,YAAK3B,EAAL,SAAU2B,CAAV;AAA7D,OACKQ,KADL,CAD0B;AAAA,GAA7B,CADL,CADJ,CAJJ,EAaI;AAAK,IAAA,SAAS,EAAC,4DAAf;AAA4E,IAAA,OAAO,EAAE;AAAA,aAAM5B,YAAY,CAAC,MAAD,CAAlB;AAAA;AAArF,KACI;AAAG,IAAA,SAAS,EAAC;AAAb,IADJ,CAbJ,EAgBI;AAAK,IAAA,SAAS,EAAC,4DAAf;AAA4E,IAAA,OAAO,EAAE;AAAA,aAAMA,YAAY,CAAC,MAAD,CAAlB;AAAA;AAArF,KACI;AAAG,IAAA,SAAS,EAAC;AAAb,IADJ,CAhBJ,CADJ;AAsBH,CAjGD;;GAAMX,Q;;KAAAA,Q;AAmGNA,QAAQ,CAACwC,YAAT,GAAwB;AACpBrC,EAAAA,KAAK,EAAE,CADa;AAEpBD,EAAAA,QAAQ,EAAE;AAFU,CAAxB;AAKA,eAAeF,QAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport smoothscroll from 'smoothscroll-polyfill';\n\n/**\n * Carousel\n * @author: Giang Nguyen\n */\ninterface Props {\n    infinite: boolean;\n    index: number;\n    id: string;\n    children: React.ReactNode;\n}\ninterface IComponentCarousel<P = {}> extends React.FC<P> {\n    defaultProps: Partial<P>;\n}\n\nconst Carousel: IComponentCarousel<Props> = (props) => {\n    // Constructor\n    const { infinite, index, id, children } = props;\n    const [state, setState] = useState({\n        slideIndex: index as number,\n    });\n    const { slideIndex } = state;\n\n    // useEffect as componentDidMount and componentWillUnmount\n    useEffect(() => {\n        smoothscroll.polyfill();\n\n        setTimeout(() => {\n            processSlide();\n        }, 10);\n        return () => {\n            processSlide('remove');\n        };\n    }, []);\n\n    const processSlide = (action: string = '') => {\n        const carousel = document.getElementById(`carousel_${id}`);\n        if (action == 'remove') {\n            carousel?.removeEventListener('scroll', () => {});\n        } else {\n            const children_length = React.Children.toArray(children).length;\n\n            // Define previous or next slide\n            let prevIndex = slideIndex - 1;\n            if (slideIndex == 0) {\n                if (infinite) {\n                    prevIndex = children_length - 1;\n                } else {\n                    prevIndex = 0;\n                }\n            }\n            let nextIndex = slideIndex + 1;\n            if (slideIndex == children_length - 1) {\n                if (infinite) {\n                    nextIndex = 0;\n                } else {\n                    nextIndex = children_length - 1;\n                }\n            }\n            const slide_id = action == 'prev' ? `${id}${prevIndex}` : action == 'next' ? `${id}${nextIndex}` : `${id}${slideIndex}`;\n            let offsetLeft = document.getElementById(slide_id)?.offsetLeft;\n\n            // Scroll to slide\n            carousel?.scrollTo({ left: offsetLeft ? offsetLeft : 0, behavior: action ? 'smooth' : 'auto' });\n\n            // Handle slide index\n            carousel?.addEventListener('scroll', () => {\n                let elements = document.querySelectorAll(`div.components__carousel-item.${id}`);\n                for (const i in elements) {\n                    let element = elements[i];\n                    const next_element = document.getElementById(`${id}${parseInt(i) + 1}`);\n                    if (element instanceof HTMLElement) {\n                        if (!next_element && carousel.scrollLeft >= element.offsetLeft - 100) {\n                            setState((prevState) => ({\n                                ...prevState,\n                                slideIndex: children_length - 1,\n                            }));\n                        }\n                        if (next_element && carousel.scrollLeft >= element.offsetLeft && carousel.scrollLeft <= next_element.offsetLeft) {\n                            setState((prevState) => ({\n                                ...prevState,\n                                slideIndex: parseInt(i),\n                            }));\n                        }\n                    }\n                }\n            });\n        }\n    };\n\n    return (\n        <div className=\"components__carousel\">\n            <div className=\"components__carousel-index pv2 ph3\">\n                {slideIndex + 1} / {React.Children.toArray(children).length}\n            </div>\n            <div className=\"components__carousel-wrapper\" id={`carousel_${id}`}>\n                <div className=\"flex\">\n                    {React.Children.map(children, (child, i) => (\n                        <div className={`components__carousel-item ${id}`} key={i} id={`${id}${i}`}>\n                            {child}\n                        </div>\n                    ))}\n                </div>\n            </div>\n            <div className=\"components__carousel-prev flex justify-center items-center\" onClick={() => processSlide('prev')}>\n                <i className=\"fa fa-chevron-left\" />\n            </div>\n            <div className=\"components__carousel-next flex justify-center items-center\" onClick={() => processSlide('next')}>\n                <i className=\"fa fa-chevron-right\" />\n            </div>\n        </div>\n    );\n};\n\nCarousel.defaultProps = {\n    index: 0,\n    infinite: true,\n};\n\nexport default Carousel;\n"]},"metadata":{},"sourceType":"module"}