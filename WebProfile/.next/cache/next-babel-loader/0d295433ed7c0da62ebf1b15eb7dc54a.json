{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Fragment, useState, useEffect, useCallback } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport smoothscroll from 'smoothscroll-polyfill'; // Languages\n\nimport { i18n, appWithTranslation } from '@languages/index';\n// Components\nimport { Header, Footer, Img, Splash } from '@components/index'; // Redux\n\nimport { Provider } from 'react-redux';\nimport withRedux from 'next-redux-wrapper';\nimport reduxStore from '@redux/store';\n/**\n * App layout\n * @author: Giang Nguyen\n */\n\nvar AppLayout = function AppLayout(props) {\n  _s();\n\n  // Constructor\n  var Component = props.Component,\n      pageProps = props.pageProps,\n      store = props.store,\n      router = props.router;\n\n  var _useState = useState({\n    isShowMenu: router.pathname != '/' ? false : true,\n    isScroll: false,\n    isSticky: false,\n    isShowBackTop: false,\n    pageLoading: true,\n    section: ''\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var isShowMenu = state.isShowMenu,\n      isScroll = state.isScroll,\n      isSticky = state.isSticky,\n      isShowBackTop = state.isShowBackTop,\n      pageLoading = state.pageLoading,\n      section = state.section; // useEffect as componentDidMount\n\n  useEffect(function () {\n    smoothscroll.polyfill();\n    loadPage();\n  }, []); // useEffect as componentDidUpdate for router.pathname\n\n  useEffect(function () {\n    setState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        isShowMenu: router.pathname != '/' ? false : true\n      });\n    });\n  }, [router.pathname]);\n\n  var loadPage = function loadPage() {\n    var interval = setInterval(function () {\n      if (!process.server && document.readyState === 'complete') {\n        clearInterval(interval);\n        setTimeout(function () {\n          setState(function (prevState) {\n            return _objectSpread(_objectSpread({}, prevState), {}, {\n              pageLoading: false\n            });\n          });\n        }, 800);\n      }\n    }, 100);\n  };\n\n  var handleScroll = useCallback(function () {\n    var body = document.body;\n    var client = document.documentElement;\n    client = client.clientHeight ? client : body; // Handle sticky header\n\n    if (client.scrollTop > 0 && !isSticky) {\n      setState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          isSticky: true\n        });\n      });\n    }\n\n    if (client.scrollTop <= 0 && isSticky) {\n      setState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          isSticky: false\n        });\n      });\n    }\n\n    if (!isScroll) {\n      // Handle active menu item\n      var elements = document.querySelectorAll('div.components__header-menu-item');\n      elements.forEach(function (elm, index) {\n        var current_element_id = elm.getAttribute('data-toggle');\n        var current_element = document.getElementById(current_element_id ? current_element_id : '');\n        var next_element_id = elements[index + 1] ? elements[index + 1].getAttribute('data-toggle') : '';\n        var next_element = document.getElementById(next_element_id ? next_element_id : '');\n        var first_element_id = elements[0] ? elements[0].getAttribute('data-toggle') : '';\n        var first_element = document.getElementById(first_element_id ? first_element_id : '');\n\n        if (current_element) {\n          var current_offset_top = current_element.offsetTop - 175;\n\n          if (next_element) {\n            var next_offset_top = next_element.offsetTop - 175;\n\n            if (client.scrollTop >= current_offset_top && client.scrollTop < next_offset_top) {\n              setState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  section: current_element_id ? current_element_id : ''\n                });\n              });\n            }\n          } else {\n            if (client.scrollTop >= current_offset_top) {\n              setState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  section: current_element_id ? current_element_id : ''\n                });\n              });\n            }\n          }\n        }\n\n        if (first_element) {\n          var first_offset_top = first_element.offsetTop - 155;\n\n          if (client.scrollTop < first_offset_top) {\n            setState(function (prevState) {\n              return _objectSpread(_objectSpread({}, prevState), {}, {\n                section: ''\n              });\n            });\n          }\n        }\n      });\n    } // Handle show back to top button\n\n\n    if (document.documentElement.scrollTop >= 100 && !isShowBackTop) {\n      setState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          isShowBackTop: true\n        });\n      });\n    }\n\n    if (document.documentElement.scrollTop < 100 && isShowBackTop) {\n      setState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          isShowBackTop: false\n        });\n      });\n    }\n  }, [isScroll, isSticky, isShowBackTop]); // useEffect as componentDidUpdate and componentWillUnmount for handleScroll\n\n  useEffect(function () {\n    window.addEventListener('load', handleScroll);\n    window.addEventListener('scroll', handleScroll);\n    return function () {\n      window.removeEventListener('load', handleScroll);\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [handleScroll]);\n\n  var scrollTo = function scrollTo(section) {\n    setState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        isScroll: true,\n        section: section\n      });\n    });\n    setTimeout(function () {\n      setState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          isScroll: false\n        });\n      });\n    }, 1000);\n  };\n\n  var backToTop = function backToTop() {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"layouts__app\"\n  }, __jsx(Provider, {\n    store: store\n  }, __jsx(ToastContainer, null), __jsx(Header, {\n    router: router,\n    isShowMenu: isShowMenu,\n    isSticky: isSticky,\n    pageLoading: pageLoading,\n    section: section,\n    scrollTo: scrollTo\n  }), !pageLoading ? __jsx(Fragment, null, __jsx(Img, {\n    className: \"layouts__app-bg\",\n    src: \"/image-asset/app-bg.png\"\n  }), __jsx(\"div\", {\n    className: \"layouts__app-backtop justify-center items-center \".concat(isShowBackTop ? 'flex' : 'dn'),\n    onClick: function onClick() {\n      return backToTop();\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-chevron-up\"\n  })), __jsx(\"div\", {\n    className: \"layouts__app-body\",\n    id: \"body-section\"\n  }, __jsx(Component, _extends({}, pageProps, {\n    router: router,\n    locale: i18n.language ? i18n.language : 'en'\n  })))) : __jsx(Splash, null), __jsx(Footer, {\n    router: router,\n    pageLoading: pageLoading\n  })));\n};\n\n_s(AppLayout, \"hiVhEIT1Ot/P291bm/dfs0TNtvE=\");\n\n_c = AppLayout;\n\nAppLayout.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var Component, ctx;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            Component = _ref.Component, ctx = _ref.ctx;\n            _context.t0 = _objectSpread;\n            _context.t1 = {};\n\n            if (!Component.getInitialProps) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 6;\n            return Component.getInitialProps(ctx);\n\n          case 6:\n            _context.t2 = _context.sent;\n            _context.next = 10;\n            break;\n\n          case 9:\n            _context.t2 = {};\n\n          case 10:\n            _context.t3 = _context.t2;\n            _context.t4 = (0, _context.t0)(_context.t1, _context.t3);\n            return _context.abrupt(\"return\", {\n              pageProps: _context.t4\n            });\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default withRedux(reduxStore)(appWithTranslation(AppLayout));\n\nvar _c;\n\n$RefreshReg$(_c, \"AppLayout\");","map":{"version":3,"sources":["/home/nguyen/workspace/projects/eparking/WebProfile/pages/_app.tsx"],"names":["Fragment","useState","useEffect","useCallback","ToastContainer","smoothscroll","i18n","appWithTranslation","Header","Footer","Img","Splash","Provider","withRedux","reduxStore","AppLayout","props","Component","pageProps","store","router","isShowMenu","pathname","isScroll","isSticky","isShowBackTop","pageLoading","section","state","setState","polyfill","loadPage","prevState","interval","setInterval","process","server","document","readyState","clearInterval","setTimeout","handleScroll","body","client","documentElement","clientHeight","scrollTop","elements","querySelectorAll","forEach","elm","index","current_element_id","getAttribute","current_element","getElementById","next_element_id","next_element","first_element_id","first_element","current_offset_top","offsetTop","next_offset_top","first_offset_top","window","addEventListener","removeEventListener","scrollTo","backToTop","top","behavior","language","getInitialProps","ctx"],"mappings":"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","sourcesContent":["import { Component, Fragment, useState, useEffect, useCallback } from 'react';\nimport { AppContext, AppInitialProps } from 'next/app';\nimport { ToastContainer } from 'react-toastify';\nimport smoothscroll from 'smoothscroll-polyfill';\n\n// Languages\nimport { i18n, appWithTranslation } from '@languages/index';\nimport { Router } from 'next-i18next';\n\n// Components\nimport { Header, Footer, Img, Splash } from '@components/index';\n\n// Redux\nimport { Provider } from 'react-redux';\nimport withRedux from 'next-redux-wrapper';\nimport reduxStore from '@redux/store';\n\n/**\n * App layout\n * @author: Giang Nguyen\n */\ninterface Props extends AppInitialProps {\n    Component: React.FC<Component>;\n    store: any;\n    router: Router;\n}\ninterface Process {\n    server: boolean;\n}\ndeclare var process: Process;\n\ninterface INextPage<P = {}> extends React.FC<P> {\n    getInitialProps: (props: AppContext) => Promise<{ pageProps: any }>;\n}\n\nconst AppLayout: INextPage<Props> = (props) => {\n    // Constructor\n    const { Component, pageProps, store, router } = props;\n    const [state, setState] = useState({\n        isShowMenu: (router.pathname != '/' ? false : true) as boolean,\n        isScroll: false as boolean,\n        isSticky: false as boolean,\n        isShowBackTop: false as boolean,\n        pageLoading: true as boolean,\n        section: '' as string,\n    });\n    const { isShowMenu, isScroll, isSticky, isShowBackTop, pageLoading, section } = state;\n\n    // useEffect as componentDidMount\n    useEffect(() => {\n        smoothscroll.polyfill();\n        loadPage();\n    }, []);\n\n    // useEffect as componentDidUpdate for router.pathname\n    useEffect(() => {\n        setState((prevState) => ({\n            ...prevState,\n            isShowMenu: router.pathname != '/' ? false : true,\n        }));\n    }, [router.pathname]);\n\n    const loadPage = () => {\n        let interval = setInterval(() => {\n            if (!process.server && document.readyState === 'complete') {\n                clearInterval(interval);\n                setTimeout(() => {\n                    setState((prevState) => ({\n                        ...prevState,\n                        pageLoading: false,\n                    }));\n                }, 800);\n            }\n        }, 100);\n    };\n\n    const handleScroll = useCallback(() => {\n        const body = document.body;\n        let client = document.documentElement;\n        client = client.clientHeight ? client : body;\n\n        // Handle sticky header\n        if (client.scrollTop > 0 && !isSticky) {\n            setState((prevState) => ({\n                ...prevState,\n                isSticky: true,\n            }));\n        }\n        if (client.scrollTop <= 0 && isSticky) {\n            setState((prevState) => ({\n                ...prevState,\n                isSticky: false,\n            }));\n        }\n        if (!isScroll) {\n            // Handle active menu item\n            let elements = document.querySelectorAll('div.components__header-menu-item');\n            elements.forEach((elm, index) => {\n                let current_element_id = elm.getAttribute('data-toggle');\n                let current_element = document.getElementById(current_element_id ? current_element_id : '');\n\n                let next_element_id = elements[index + 1] ? elements[index + 1].getAttribute('data-toggle') : '';\n                let next_element = document.getElementById(next_element_id ? next_element_id : '');\n\n                let first_element_id = elements[0] ? elements[0].getAttribute('data-toggle') : '';\n                let first_element = document.getElementById(first_element_id ? first_element_id : '');\n\n                if (current_element) {\n                    let current_offset_top = current_element.offsetTop - 175;\n                    if (next_element) {\n                        let next_offset_top = next_element.offsetTop - 175;\n                        if (client.scrollTop >= current_offset_top && client.scrollTop < next_offset_top) {\n                            setState((prevState) => ({\n                                ...prevState,\n                                section: current_element_id ? current_element_id : '',\n                            }));\n                        }\n                    } else {\n                        if (client.scrollTop >= current_offset_top) {\n                            setState((prevState) => ({\n                                ...prevState,\n                                section: current_element_id ? current_element_id : '',\n                            }));\n                        }\n                    }\n                }\n                if (first_element) {\n                    let first_offset_top = first_element.offsetTop - 155;\n                    if (client.scrollTop < first_offset_top) {\n                        setState((prevState) => ({\n                            ...prevState,\n                            section: '',\n                        }));\n                    }\n                }\n            });\n        }\n\n        // Handle show back to top button\n        if (document.documentElement.scrollTop >= 100 && !isShowBackTop) {\n            setState((prevState) => ({\n                ...prevState,\n                isShowBackTop: true,\n            }));\n        }\n        if (document.documentElement.scrollTop < 100 && isShowBackTop) {\n            setState((prevState) => ({\n                ...prevState,\n                isShowBackTop: false,\n            }));\n        }\n    }, [isScroll, isSticky, isShowBackTop]);\n\n    // useEffect as componentDidUpdate and componentWillUnmount for handleScroll\n    useEffect(() => {\n        window.addEventListener('load', handleScroll);\n        window.addEventListener('scroll', handleScroll);\n\n        return () => {\n            window.removeEventListener('load', handleScroll);\n            window.removeEventListener('scroll', handleScroll);\n        };\n    }, [handleScroll]);\n\n    const scrollTo = (section: string) => {\n        setState((prevState) => ({\n            ...prevState,\n            isScroll: true,\n            section,\n        }));\n        setTimeout(() => {\n            setState((prevState) => ({\n                ...prevState,\n                isScroll: false,\n            }));\n        }, 1000);\n    };\n\n    const backToTop = () => {\n        window.scrollTo({ top: 0, behavior: 'smooth' });\n    };\n\n    return (\n        <div className=\"layouts__app\">\n            <Provider store={store}>\n                <ToastContainer />\n                <Header\n                    router={router}\n                    isShowMenu={isShowMenu}\n                    isSticky={isSticky}\n                    pageLoading={pageLoading}\n                    section={section}\n                    scrollTo={scrollTo}\n                />\n                {!pageLoading ? (\n                    <Fragment>\n                        <Img className=\"layouts__app-bg\" src=\"/image-asset/app-bg.png\" />\n                        <div\n                            className={`layouts__app-backtop justify-center items-center ${isShowBackTop ? 'flex' : 'dn'}`}\n                            onClick={() => backToTop()}>\n                            <i className=\"fa fa-chevron-up\" />\n                        </div>\n                        <div className=\"layouts__app-body\" id=\"body-section\">\n                            <Component {...pageProps} router={router} locale={i18n.language ? i18n.language : 'en'} />\n                        </div>\n                    </Fragment>\n                ) : (\n                    <Splash />\n                )}\n                <Footer router={router} pageLoading={pageLoading} />\n            </Provider>\n        </div>\n    );\n};\n\nAppLayout.getInitialProps = async ({ Component, ctx }: AppContext) => {\n    return {\n        pageProps: {\n            ...(Component.getInitialProps ? await Component.getInitialProps(ctx) : {}),\n        },\n    };\n};\n\nexport default withRedux(reduxStore)(appWithTranslation(AppLayout));\n"]},"metadata":{},"sourceType":"module"}