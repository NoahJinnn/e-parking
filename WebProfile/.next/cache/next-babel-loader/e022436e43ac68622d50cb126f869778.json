{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// Languages\nimport { useEffect, useState } from 'react'; // Redux\n\nimport { useSelector } from 'react-redux'; // Data\n\nimport data from '@assets/data/data'; // Components\n\nimport { Carousel, Img } from '@components/index';\n\nvar ProductDetailPage = function ProductDetailPage(props) {\n  // Constructor\n  var router = props.router;\n  var locale = useSelector(function (states) {\n    return states.locale;\n  });\n\n  var _useState = useState({\n    product: data[locale].products[router.query.slug],\n    isFullScreen: false,\n    imageIndex: 0\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var product = state.product,\n      isFullScreen = state.isFullScreen,\n      imageIndex = state.imageIndex; // useEffect as componentDidMount\n\n  useEffect(function () {// firebase.analytics().logEvent(product.firebase_event);\n  }, []); // useEffect as componentDidUpdate for locale\n\n  useEffect(function () {\n    setState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        product: data[locale].products[router.query.slug]\n      });\n    });\n  }, [locale]);\n\n  var processFullScreen = function processFullScreen(index, action) {\n    if (action == 'open') {\n      document.body.classList.add('stop-scrolling');\n    } else {\n      document.body.classList.remove('stop-scrolling');\n    }\n\n    setState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        isFullScreen: action == 'open' ? true : false,\n        imageIndex: index\n      });\n    });\n  };\n\n  var renderAssets = function renderAssets() {\n    var images = product.images,\n        thumbnails = product.thumbnails,\n        videos = product.videos;\n    var assets = [];\n    images === null || images === void 0 ? void 0 : images.forEach(function (image, index) {\n      return assets.push(__jsx(Img, {\n        key: index,\n        isBlur: true,\n        placeholder: thumbnails && thumbnails[index],\n        src: image,\n        onClick: function onClick() {\n          return processFullScreen(index, 'open');\n        }\n      }));\n    });\n    videos === null || videos === void 0 ? void 0 : videos.forEach(function (video, index) {\n      assets.push(__jsx(\"div\", {\n        key: index,\n        style: {\n          height: '100%',\n          padding: '4rem'\n        }\n      }, __jsx(\"iframe\", {\n        height: '100%',\n        width: '100%',\n        src: video,\n        title: \"YouTube video player\",\n        frameBorder: \"0\",\n        allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n        allowFullScreen: true\n      })));\n    });\n    return assets;\n  };\n\n  return __jsx(\"div\", {\n    className: \"pages__product_detail bases__container white\"\n  }, !isFullScreen ? __jsx(\"div\", {\n    className: \"flex flex-wrap\"\n  }, __jsx(\"div\", {\n    className: \"pages__product_detail-slider w-100 w-50-l ph3\"\n  }, __jsx(Carousel, {\n    index: imageIndex,\n    id: \"products\"\n  }, renderAssets())), __jsx(\"div\", {\n    className: \"pages__product_detail-content w-100 w-50-l ph3\"\n  }, __jsx(\"div\", {\n    className: \"pages__product_detail-content_heading bases__text--bold bases__font--24 tl\"\n  }, product.title), __jsx(\"div\", {\n    className: \"pages__product_detail-content_desc bases__font--16 tl mt4\"\n  }, product.description))) : __jsx(\"div\", {\n    className: \"pages__product_detail-overlay flex flex-column justify-center\"\n  }, __jsx(\"div\", {\n    className: \"pages__product_detail-overlay_closebtn mt2 mr3\",\n    onClick: function onClick() {\n      return processFullScreen(0, 'close');\n    }\n  }, __jsx(\"i\", {\n    className: \"bases__font--22 fa fa-times\"\n  })), __jsx(Carousel, {\n    index: imageIndex,\n    id: \"fullscreen\"\n  }, renderAssets())));\n};\n\nProductDetailPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", {\n              query: ctx.query,\n              namespacesRequired: ['common']\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default ProductDetailPage;","map":null,"metadata":{},"sourceType":"module"}