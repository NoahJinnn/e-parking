{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport smoothscroll from 'smoothscroll-polyfill';\n/**\n * Carousel\n * @author: Giang Nguyen\n */\n\nvar Carousel = function Carousel(props) {\n  // Constructor\n  var infinite = props.infinite,\n      index = props.index,\n      id = props.id,\n      children = props.children;\n\n  var _useState = useState({\n    slideIndex: index\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var slideIndex = state.slideIndex; // useEffect as componentDidMount and componentWillUnmount\n\n  useEffect(function () {\n    smoothscroll.polyfill();\n    setTimeout(function () {\n      processSlide();\n    }, 10);\n    return function () {\n      processSlide('remove');\n    };\n  }, []);\n\n  var processSlide = function processSlide() {\n    var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var carousel = document.getElementById(\"carousel_\".concat(id));\n\n    if (action == 'remove') {\n      carousel === null || carousel === void 0 ? void 0 : carousel.removeEventListener('scroll', function () {});\n    } else {\n      var _document$getElementB;\n\n      var children_length = React.Children.toArray(children).length; // Define previous or next slide\n\n      var prevIndex = slideIndex - 1;\n\n      if (slideIndex == 0) {\n        if (infinite) {\n          prevIndex = children_length - 1;\n        } else {\n          prevIndex = 0;\n        }\n      }\n\n      var nextIndex = slideIndex + 1;\n\n      if (slideIndex == children_length - 1) {\n        if (infinite) {\n          nextIndex = 0;\n        } else {\n          nextIndex = children_length - 1;\n        }\n      }\n\n      var slide_id = action == 'prev' ? \"\".concat(id).concat(prevIndex) : action == 'next' ? \"\".concat(id).concat(nextIndex) : \"\".concat(id).concat(slideIndex);\n      var offsetLeft = (_document$getElementB = document.getElementById(slide_id)) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.offsetLeft; // Scroll to slide\n\n      carousel === null || carousel === void 0 ? void 0 : carousel.scrollTo({\n        left: offsetLeft ? offsetLeft : 0,\n        behavior: action ? 'smooth' : 'auto'\n      }); // Handle slide index\n\n      carousel === null || carousel === void 0 ? void 0 : carousel.addEventListener('scroll', function () {\n        var elements = document.querySelectorAll(\"div.components__carousel-item.\".concat(id));\n\n        var _loop = function _loop(i) {\n          var element = elements[i];\n          var next_element = document.getElementById(\"\".concat(id).concat(parseInt(i) + 1));\n\n          if (element instanceof HTMLElement) {\n            if (!next_element && carousel.scrollLeft >= element.offsetLeft - 100) {\n              setState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  slideIndex: children_length - 1\n                });\n              });\n            }\n\n            if (next_element && carousel.scrollLeft >= element.offsetLeft && carousel.scrollLeft <= next_element.offsetLeft) {\n              setState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  slideIndex: parseInt(i)\n                });\n              });\n            }\n          }\n        };\n\n        for (var i in elements) {\n          _loop(i);\n        }\n      });\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"components__carousel\"\n  }, __jsx(\"div\", {\n    className: \"components__carousel-index pv2 ph3\"\n  }, slideIndex + 1, \" / \", React.Children.toArray(children).length), __jsx(\"div\", {\n    className: \"components__carousel-wrapper\",\n    id: \"carousel_\".concat(id)\n  }, __jsx(\"div\", {\n    className: \"flex\"\n  }, React.Children.map(children, function (child, i) {\n    return __jsx(\"div\", {\n      className: \"components__carousel-item \".concat(id),\n      key: i,\n      id: \"\".concat(id).concat(i)\n    }, child);\n  }))), __jsx(\"div\", {\n    className: \"components__carousel-prev flex justify-center items-center\",\n    onClick: function onClick() {\n      return processSlide('prev');\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-chevron-left\"\n  })), __jsx(\"div\", {\n    className: \"components__carousel-next flex justify-center items-center\",\n    onClick: function onClick() {\n      return processSlide('next');\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-chevron-right\"\n  })));\n};\n\nCarousel.defaultProps = {\n  index: 0,\n  infinite: true\n};\nexport default Carousel;","map":null,"metadata":{},"sourceType":"module"}