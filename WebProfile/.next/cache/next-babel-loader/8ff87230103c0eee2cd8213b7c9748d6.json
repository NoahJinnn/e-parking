{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// Languages\nimport { useEffect, useState } from 'react'; // Redux\n\nimport { useSelector } from 'react-redux'; // Data\n\nimport data from '@assets/data/data'; // Components\n\nimport { Carousel, Img } from '@components/index';\n\nvar ProductDetailPage = function ProductDetailPage(props) {\n  _s();\n\n  // Constructor\n  var router = props.router;\n  var locale = useSelector(function (states) {\n    return states.locale;\n  });\n\n  var _useState = useState({\n    product: data[locale].products[router.query.slug],\n    isFullScreen: false,\n    imageIndex: 0\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var product = state.product,\n      isFullScreen = state.isFullScreen,\n      imageIndex = state.imageIndex; // useEffect as componentDidMount\n\n  useEffect(function () {// firebase.analytics().logEvent(product.firebase_event);\n  }, []); // useEffect as componentDidUpdate for locale\n\n  useEffect(function () {\n    setState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        product: data[locale].products[router.query.slug]\n      });\n    });\n  }, [locale]);\n\n  var processFullScreen = function processFullScreen(index, action) {\n    if (action == 'open') {\n      document.body.classList.add('stop-scrolling');\n    } else {\n      document.body.classList.remove('stop-scrolling');\n    }\n\n    setState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        isFullScreen: action == 'open' ? true : false,\n        imageIndex: index\n      });\n    });\n  };\n\n  var renderAssets = function renderAssets() {\n    var images = product.images,\n        thumbnails = product.thumbnails,\n        videos = product.videos;\n    var assets = [];\n    images === null || images === void 0 ? void 0 : images.forEach(function (image, index) {\n      return assets.push(__jsx(Img, {\n        key: index,\n        isBlur: true,\n        placeholder: thumbnails && thumbnails[index],\n        src: image,\n        onClick: function onClick() {\n          return processFullScreen(index, 'open');\n        }\n      }));\n    });\n    videos === null || videos === void 0 ? void 0 : videos.forEach(function (video, index) {\n      assets.push(__jsx(\"div\", {\n        style: {\n          height: '100%',\n          padding: '4rem'\n        }\n      }, __jsx(\"iframe\", {\n        height: '100%',\n        width: '100%',\n        key: index,\n        src: video,\n        title: \"YouTube video player\",\n        frameBorder: \"0\",\n        allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n        allowFullScreen: true\n      })));\n    });\n    return assets;\n  };\n\n  return __jsx(\"div\", {\n    className: \"pages__product_detail bases__container white\"\n  }, !isFullScreen ? __jsx(\"div\", {\n    className: \"flex flex-wrap\"\n  }, __jsx(\"div\", {\n    className: \"pages__product_detail-slider w-100 w-50-l ph3\"\n  }, __jsx(Carousel, {\n    index: imageIndex,\n    id: \"products\"\n  }, renderAssets())), __jsx(\"div\", {\n    className: \"pages__product_detail-content w-100 w-50-l ph3\"\n  }, __jsx(\"div\", {\n    className: \"pages__product_detail-content_heading bases__text--bold bases__font--24 tl\"\n  }, product.title), __jsx(\"div\", {\n    className: \"pages__product_detail-content_desc bases__font--16 tl mt4\"\n  }, product.description))) : __jsx(\"div\", {\n    className: \"pages__product_detail-overlay flex flex-column justify-center\"\n  }, __jsx(\"div\", {\n    className: \"pages__product_detail-overlay_closebtn mt2 mr3\",\n    onClick: function onClick() {\n      return processFullScreen(0, 'close');\n    }\n  }, __jsx(\"i\", {\n    className: \"bases__font--22 fa fa-times\"\n  })), __jsx(Carousel, {\n    index: imageIndex,\n    id: \"fullscreen\"\n  }, renderAssets())));\n};\n\n_s(ProductDetailPage, \"hc7WKXaKjoHSj3XaPPyv0tbfMgA=\", false, function () {\n  return [useSelector];\n});\n\n_c = ProductDetailPage;\n\nProductDetailPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", {\n              query: ctx.query,\n              namespacesRequired: ['common']\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default ProductDetailPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductDetailPage\");","map":{"version":3,"sources":["/home/nguyen/workspace/projects/eparking/WebProfile/pages/product/slug.tsx"],"names":["useEffect","useState","useSelector","data","Carousel","Img","ProductDetailPage","props","router","locale","states","product","products","query","slug","isFullScreen","imageIndex","state","setState","prevState","processFullScreen","index","action","document","body","classList","add","remove","renderAssets","images","thumbnails","videos","assets","forEach","image","push","video","height","padding","title","description","getInitialProps","ctx","namespacesRequired"],"mappings":"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","sourcesContent":["// Languages\nimport { Router } from 'next-i18next';\nimport { AppInitialProps } from 'next/app';\nimport { useEffect, useState } from 'react';\n// Redux\nimport { useSelector } from 'react-redux';\n\n// Data\nimport data from '@assets/data/data';\n// Components\nimport { Carousel, Img } from '@components/index';\nimport { firebase } from '@plugins/index';\nimport { ReduxStates } from '@redux/reducers';\n\n/**\n * Product detail page\n * @author: Giang Nguyen\n */\ninterface Props extends AppInitialProps {\n    router: Router;\n}\ntype LocaleKeys = 'en' | 'vi';\ntype ProductKeys = 'carousel-parking-system' | 'square-parking-system' | 'tor-parking-system';\n\ninterface INextProductDetailPage<P = {}> extends React.FC<P> {\n    getInitialProps: (ctx: any) => Promise<{ query: any; namespacesRequired: string[] }>;\n}\n\nconst ProductDetailPage: INextProductDetailPage<Props> = (props) => {\n    // Constructor\n    const { router } = props;\n    const locale = useSelector((states: ReduxStates) => states.locale);\n    const [state, setState] = useState({\n        product: data[locale as LocaleKeys].products[router.query.slug as ProductKeys] as any,\n        isFullScreen: false as boolean,\n        imageIndex: 0 as number,\n    });\n    const { product, isFullScreen, imageIndex } = state;\n\n    // useEffect as componentDidMount\n    useEffect(() => {\n        // firebase.analytics().logEvent(product.firebase_event);\n    }, []);\n\n    // useEffect as componentDidUpdate for locale\n    useEffect(() => {\n        setState((prevState: any) => ({\n            ...prevState,\n            product: data[locale as LocaleKeys].products[router.query.slug as ProductKeys],\n        }));\n    }, [locale]);\n\n    const processFullScreen = (index: number, action: string) => {\n        if (action == 'open') {\n            document.body.classList.add('stop-scrolling');\n        } else {\n            document.body.classList.remove('stop-scrolling');\n        }\n        setState((prevState: any) => ({\n            ...prevState,\n            isFullScreen: action == 'open' ? true : false,\n            imageIndex: index,\n        }));\n    };\n\n    const renderAssets = () => {\n        const { images, thumbnails, videos } = product;\n        const assets: JSX.Element[] = [];\n        images?.forEach((image: any, index: number) =>\n            assets.push(\n                <Img\n                    key={index}\n                    isBlur={true}\n                    placeholder={thumbnails && thumbnails[index]}\n                    src={image}\n                    onClick={() => processFullScreen(index, 'open')}\n                />,\n            ),\n        );\n        videos?.forEach((video: any, index: number) => {\n            assets.push(\n                <div style={{ height: '100%', padding: '4rem' }}>\n                    <iframe\n                        height={'100%'}\n                        width={'100%'}\n                        key={index}\n                        src={video}\n                        title=\"YouTube video player\"\n                        frameBorder=\"0\"\n                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                        allowFullScreen></iframe>\n                </div>,\n            );\n        });\n        return assets;\n    };\n\n    return (\n        <div className=\"pages__product_detail bases__container white\">\n            {!isFullScreen ? (\n                <div className=\"flex flex-wrap\">\n                    <div className=\"pages__product_detail-slider w-100 w-50-l ph3\">\n                        <Carousel index={imageIndex} id=\"products\">\n                            {renderAssets()}\n                        </Carousel>\n                    </div>\n                    <div className=\"pages__product_detail-content w-100 w-50-l ph3\">\n                        <div className=\"pages__product_detail-content_heading bases__text--bold bases__font--24 tl\">{product.title}</div>\n                        <div className=\"pages__product_detail-content_desc bases__font--16 tl mt4\">{product.description}</div>\n                    </div>\n                </div>\n            ) : (\n                <div className=\"pages__product_detail-overlay flex flex-column justify-center\">\n                    <div className=\"pages__product_detail-overlay_closebtn mt2 mr3\" onClick={() => processFullScreen(0, 'close')}>\n                        <i className=\"bases__font--22 fa fa-times\" />\n                    </div>\n                    <Carousel index={imageIndex} id=\"fullscreen\">\n                        {renderAssets()}\n                    </Carousel>\n                </div>\n            )}\n        </div>\n    );\n};\n\nProductDetailPage.getInitialProps = async (ctx: any) => {\n    return {\n        query: ctx.query,\n        namespacesRequired: ['common'],\n    };\n};\n\nexport default ProductDetailPage;\n"]},"metadata":{},"sourceType":"module"}