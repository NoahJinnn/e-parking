{"ast":null,"code":"var _jsxFileName = \"/home/nguyen/workspace/projects/eparking/WebForEndUser/src/components/prefixSelector/index.tsx\";\nimport './index.scss';\nimport React, { useState } from 'react';\nimport Img from 'react-cool-img';\nimport LazyLoad from 'react-lazyload';\nimport { CountryFlags } from '@assets/country';\nimport { SVGDropdown } from '@assets/svgc/dropdown';\nimport { useMountedState } from '@hooks/mount';\nimport { useDidMount } from '@hooks/utils'; // Declare component props\n\nexport const PrefixSelector = props => {\n  const {\n    onClick,\n    currentPrefixCode = \"VN\",\n    classContainer = \"w-50\"\n  } = props;\n  const [currentPrefix, setCurrentPrefix] = useState();\n  const [supportPrefix, setSupportPrefix] = useState({});\n  const [showSelector, setShowSelector] = useState(false);\n  const getMounted = useMountedState();\n  useDidMount(async () => {\n    const prefixs = await import(\"@assets/country/country.json\");\n    const supportList = {};\n\n    for (const flag of Object.keys(CountryFlags)) {\n      if (prefixs[flag]) {\n        supportList[flag] = prefixs[flag];\n      }\n    }\n\n    if (getMounted()) {\n      setSupportPrefix(supportList);\n      onSelectPrefix(supportList[currentPrefixCode.toLocaleUpperCase()] || supportList.VN);\n    }\n  });\n\n  const onSelectPrefix = prefix => {\n    var _props$onSelectPrefix;\n\n    onChangeShowPopup(false, prefix);\n    (_props$onSelectPrefix = props.onSelectPrefix) === null || _props$onSelectPrefix === void 0 ? void 0 : _props$onSelectPrefix.call(props, prefix);\n  };\n\n  const onChangeShowPopup = (show = !showSelector, prefix) => {\n    requestAnimationFrame(() => {\n      if (prefix) {\n        setCurrentPrefix(prefix);\n      }\n\n      setShowSelector(show);\n    });\n  };\n\n  const toggleShowPopup = () => onChangeShowPopup();\n\n  const popUpItems = Object.values(supportPrefix).sort((a, b) => a.name < b.name ? -1 : a.name > b.name ? 1 : 0).map(val => /*#__PURE__*/React.createElement(LazyLoad, {\n    height: 50,\n    key: val.code,\n    scrollContainer: \"#scroll-prefix-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => onSelectPrefix(val),\n    className: \"flex flex-row w-100 items-center pr3 pl3 pointer dim\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex w-100 flex-row items-center overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Img, {\n    className: \"br-pill\",\n    style: {\n      width: 24,\n      height: 24,\n      objectFit: \"cover\"\n    },\n    src: `/country/${val.code.toLocaleLowerCase()}.png`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"f5 pl2 hard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, val.name)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"f5 fw1 light w-max-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, val.dial_code)))));\n  const popUpSelector = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"animate__animated animate__fadeInDown animate__faster absolute bg-hard mt1 br3 ba bc-light w-100 flex z-1 overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overflow-auto w-100\",\n    id: \"scroll-prefix-container\",\n    style: {\n      maxHeight: 200\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, popUpItems));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => onClick === null || onClick === void 0 ? void 0 : onClick(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${classContainer} relative`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex bg-hard-light bg-med-dark flex-row items-center ba bc-light br3 pr3 pl3 dim pointer\",\n    onClick: toggleShowPopup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex w-100 flex-row items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Img, {\n    className: \"br-pill\",\n    style: {\n      width: 24,\n      height: 24,\n      objectFit: \"cover\"\n    },\n    src: `/country/${currentPrefix === null || currentPrefix === void 0 ? void 0 : currentPrefix.code}.png`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"f5 pl2 hard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, currentPrefix === null || currentPrefix === void 0 ? void 0 : currentPrefix.name)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(SVGDropdown, {\n    width: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }))), showSelector && popUpSelector));\n};","map":{"version":3,"sources":["/home/nguyen/workspace/projects/eparking/WebForEndUser/src/components/prefixSelector/index.tsx"],"names":["React","useState","Img","LazyLoad","CountryFlags","SVGDropdown","useMountedState","useDidMount","PrefixSelector","props","onClick","currentPrefixCode","classContainer","currentPrefix","setCurrentPrefix","supportPrefix","setSupportPrefix","showSelector","setShowSelector","getMounted","prefixs","supportList","flag","Object","keys","onSelectPrefix","toLocaleUpperCase","VN","prefix","onChangeShowPopup","show","requestAnimationFrame","toggleShowPopup","popUpItems","values","sort","a","b","name","map","val","code","width","height","objectFit","toLocaleLowerCase","dial_code","popUpSelector","maxHeight"],"mappings":"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","sourcesContent":["import './index.scss';\n\nimport React, { useState } from 'react';\nimport Img from 'react-cool-img';\nimport LazyLoad from 'react-lazyload';\n\nimport { CountryFlags } from '@assets/country';\nimport { SVGDropdown } from '@assets/svgc/dropdown';\nimport { useMountedState } from '@hooks/mount';\nimport { useDidMount } from '@hooks/utils';\n\n// Declare component props\nexport interface IPrefixSelectorProps {\n    onClick?: () => any;\n    classContainer?: string;\n    currentPrefixCode?: string;\n    onSelectPrefix?: (prefix: IPrefix) => any;\n}\n\nexport const PrefixSelector: IComponent<IPrefixSelectorProps> = (props) => {\n    const { onClick, currentPrefixCode = \"VN\", classContainer = \"w-50\" } = props;\n    const [currentPrefix, setCurrentPrefix] = useState<IPrefix>();\n    const [supportPrefix, setSupportPrefix] = useState<{ [key: string]: IPrefix }>({});\n    const [showSelector, setShowSelector] = useState(false);\n    const getMounted = useMountedState();\n\n    useDidMount(async () => {\n        const prefixs: any = await import(\"@assets/country/country.json\");\n        const supportList: { [key: string]: IPrefix } = {};\n        for (const flag of Object.keys(CountryFlags)) {\n            if (prefixs[flag]) {\n                supportList[flag] = prefixs[flag];\n            }\n        }\n        if (getMounted()) {\n            setSupportPrefix(supportList);\n            onSelectPrefix(supportList[currentPrefixCode.toLocaleUpperCase()] || supportList.VN);\n        }\n    });\n\n    const onSelectPrefix = (prefix: IPrefix) => {\n        onChangeShowPopup(false, prefix);\n        props.onSelectPrefix?.(prefix);\n    };\n\n    const onChangeShowPopup = (show: boolean = !showSelector, prefix?: IPrefix) => {\n        requestAnimationFrame(() => {\n            if (prefix) {\n                setCurrentPrefix(prefix);\n            }\n            setShowSelector(show);\n        });\n    };\n\n    const toggleShowPopup = () => onChangeShowPopup();\n\n    const popUpItems = Object.values(supportPrefix)\n        .sort((a, b) => (a.name < b.name ? -1 : a.name > b.name ? 1 : 0))\n        .map((val) => (\n            <LazyLoad height={50} key={val.code} scrollContainer={\"#scroll-prefix-container\"}>\n                <div onClick={() => onSelectPrefix(val)} className=\"flex flex-row w-100 items-center pr3 pl3 pointer dim\">\n                    <div className=\"flex w-100 flex-row items-center overflow-hidden\">\n                        <Img\n                            className=\"br-pill\"\n                            style={{ width: 24, height: 24, objectFit: \"cover\" }}\n                            src={`/country/${val.code.toLocaleLowerCase()}.png`}\n                        />\n                        <p className=\"f5 pl2 hard\">{val.name}</p>\n                    </div>\n                    <div>\n                        <p className=\"f5 fw1 light w-max-content\">{val.dial_code}</p>\n                    </div>\n                </div>\n            </LazyLoad>\n        ));\n\n    const popUpSelector = (\n        <div className=\"animate__animated animate__fadeInDown animate__faster absolute bg-hard mt1 br3 ba bc-light w-100 flex z-1 overflow-hidden\">\n            <div className=\"overflow-auto w-100\" id=\"scroll-prefix-container\" style={{ maxHeight: 200 }}>\n                {popUpItems}\n            </div>\n        </div>\n    );\n\n    return (\n        <div onClick={() => onClick?.()}>\n            <div className={`${classContainer} relative`}>\n                <div\n                    className=\"flex bg-hard-light bg-med-dark flex-row items-center ba bc-light br3 pr3 pl3 dim pointer\"\n                    onClick={toggleShowPopup}>\n                    <div className=\"flex w-100 flex-row items-center\">\n                        <Img\n                            className=\"br-pill\"\n                            style={{ width: 24, height: 24, objectFit: \"cover\" }}\n                            src={`/country/${currentPrefix?.code}.png`}\n                        />\n                        <p className=\"f5 pl2 hard\">{currentPrefix?.name}</p>\n                    </div>\n                    <div>\n                        <SVGDropdown width={12} />\n                    </div>\n                </div>\n                {showSelector && popUpSelector}\n            </div>\n        </div>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}